# 📚 데이터베이스 정규화 (Normalization)

정규화(Normalization)는 데이터베이스 설계 시 **데이터 중복을 줄이고**, **데이터 무결성**을 유지하기 위해 테이블을 구조화하는 과정입니다.

---

## ✅ 정규화의 목적

- **데이터 중복 제거**
- **삽입/삭제/갱신 이상 방지**
- **데이터 일관성 유지**
- **구조적 안정성과 효율성 향상**

---

## 🔑 기본키(Primary Key)란?

> **테이블 내 각 행(Row)을 유일하게 식별할 수 있는 속성 또는 속성들의 조합**

### 🔹 기본키의 조건
| 조건 | 설명 |
|------|------|
| ✅ 유일성 | 각 행마다 값이 절대 겹치면 안 됨 |
| ✅ 최소성 | 꼭 필요한 컬럼만 포함해야 함 (불필요한 컬럼 제외) |

### 🔹 예시: 학생 테이블
| 학번 (기본키) | 이름 | 전화번호 |
|--------------|------|-----------|
| 2023001      | 김다예 | 010-1234 |
| 2023002      | 이준호 | 010-5678 |

- `학번`은 학생을 유일하게 구분할 수 있으므로 기본키로 적절 ✅

---

### 🔹 복합 기본키 (Composite Key)
> 기본키가 **2개 이상의 속성**으로 구성되는 경우

| 학번 | 과목코드 | 점수 |
|------|----------|------|
| 101  | C101     | 95   |
| 101  | C102     | 88   |

- 학번만으로는 유일하지 않고, 과목코드도 마찬가지
- (학번 + 과목코드)를 합치면 유일함 → **복합 기본키**

---

### 🔹 관련 용어
| 용어 | 설명 |
|------|------|
| 기본키 (Primary Key) | 유일하게 식별하는 속성 |
| 후보키 (Candidate Key) | 기본키로 선택 가능한 속성들 |
| 대체키 (Alternate Key) | 후보키 중 선택되지 않은 나머지 |
| 외래키 (Foreign Key) | 다른 테이블의 기본키를 참조하는 속성 |

---

## ✅ 주요 정규형

### 🔸 1NF (제1정규형) - 원자성

> 모든 속성의 값이 **원자값(Atomic)**이어야 한다.  
→ 즉, 한 셀(속성)에 여러 값을 넣지 않는다.

#### 💡 예시
| 이름 | 전화번호       |
|------|----------------|
| 홍길동 | 010-1234, 010-5678 ❌ |

→ 수정 후:

| 이름 | 전화번호       |
|------|----------------|
| 홍길동 | 010-1234 ✅   |
| 홍길동 | 010-5678 ✅   |

---

### 🔸 2NF (제2정규형) - 부분 함수 종속 제거

> 1NF 만족 + **기본키의 일부에만 종속된 속성 제거**

- 복합키일 경우, **속성이 키 전체에 종속되어야 함**

#### 💡 예시
| 학번 | 과목코드 | 과목명 ❌ |
|------|----------|----------|

→ 과목명은 과목코드에만 종속 → **과목 테이블로 분리**

---

### 🔸 3NF (제3정규형) - 이행 함수 종속 제거

> 2NF 만족 + **이행적 함수 종속 제거**

- A → B, B → C 라면 A → C도 가능  
- 이 경우 **C는 B로 분리**

#### 💡 예시
| 과목코드 | 과목명 | 교수명 ❌ |
|----------|--------|----------|
| C101     | 자료구조 | 김교수 |

- 과목코드가 기본키이므로 2NF는 만족함 ✅
- 하지만 교수명이 과목명을 통해 종속 → **3NF 위반**

→ 해결:
- `과목(과목코드, 과목명)`
- `과목정보(과목명, 교수명)`

---

## ✅ 2NF vs 3NF 차이 자세히 비교

| 항목 | 2정규형 (2NF) | 3정규형 (3NF) |
|------|----------------|----------------|
| 기준 | **부분 함수 종속 제거** | **이행 함수 종속 제거** |
| 대상 | 복합 기본키의 일부 | 기본키가 아닌 속성 간의 종속 |
| 위반 예시 | 과목명이 과목코드에만 종속 | 교수명이 과목명을 통해 종속됨 |
| 해결 방법 | 속성을 별도 테이블로 분리 | 중간 속성을 테이블로 분리 |

---

## ✅ 정규화 요약표

| 정규형 | 내용 | 제거 대상 |
|--------|------|------------|
| 1NF | 속성의 원자화 | 반복 속성 |
| 2NF | 부분 종속 제거 | 복합키의 일부 종속 |
| 3NF | 이행 종속 제거 | 간접 종속 (속성 간 종속) |

---

## 🧱 고급 정규형 (선택 학습)

### 🔸 BCNF (보이스-코드 정규형)
- 모든 결정자가 후보키여야 함  
- 3NF를 만족하면서도 일부 예외 처리

### 🔸 4NF, 5NF
- 다치 종속, 조인 종속 제거 등  
- 매우 복잡한 관계 처리 (고급 데이터베이스 설계 시 사용)

---

## ✅ 정규화는 언제 쓰나?

- 데이터베이스를 처음 설계할 때
- 중복 데이터로 인해 문제가 생기는 경우
- 성능 튜닝과 무결성 유지를 함께 고려할 때

---

## ✅ 비정규화(Denormalization)란?

> 성능 개선을 위해 **의도적으로 정규화를 완화**하는 작업  
- JOIN이 많아질 경우 읽기 성능 저하 → 중복 허용하고 합치기도 함

---
